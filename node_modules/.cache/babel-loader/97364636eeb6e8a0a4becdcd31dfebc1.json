{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saul/Documents/React/BookSystem/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/saul/Documents/React/BookSystem/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/saul/Documents/React/BookSystem/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import{Form,Button,Card,Alert}from'react-bootstrap';import{useAuth}from'../Context/Auth';import{Link,useHistory}from'react-router-dom';import firebase from'firebase';import'firebase/auth';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var emailRef=useRef();var passwordRef=useRef();var _useAuth=useAuth(),login=_useAuth.login;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var history=useHistory();var _useCookies=useCookies(['user']),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookies=_useCookies2[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setError(\"\");setLoading(true);_context.next=6;return login(emailRef.current.value,passwordRef.current.value).then(function(userCrendential){var user=userCrendential.user;setCookies('user',user,{path:'/'});});case 6:history.push(\"/dashboard\");_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);setLoading(false);setError(_context.t0.message);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _handleSubmit.apply(this,arguments);}var handleLoginViaGoogle=function handleLoginViaGoogle(){var provider=new firebase.auth.GoogleAuthProvider();firebase.auth().signInWithPopup(provider).then(function(result){/** @type {firebase.auth.OAuthCredential} */var credential=result.credential;// This gives you a Google Access Token. You can use it to access the Google API.\nvar token=credential.accessToken;// The signed-in user info.\nvar user=result.user;setCookies('user',user,{path:'/'});}).then(function(result){history.push(\"/dashboard\");}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-wrapper\",children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Log In\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{id:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",ref:emailRef,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{id:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",ref:passwordRef,required:true})]}),/*#__PURE__*/_jsx(Button,{disabled:loading,type:\"submit\",className:\"w-100\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-center mt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",children:\"Forgot Password?\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 text-center mt-2\",children:[\"Need an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 text-center mt-2\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Login via \",/*#__PURE__*/_jsx(\"a\",{onClick:handleLoginViaGoogle,id:\"gmail\",children:\"Gmail?\"})]})})]});}export default Login;","map":{"version":3,"sources":["/Users/saul/Documents/React/BookSystem/frontend/src/Components/Login.js"],"names":["React","useRef","useState","Form","Button","Card","Alert","useAuth","Link","useHistory","firebase","useCookies","Login","emailRef","passwordRef","login","error","setError","loading","setLoading","history","cookies","setCookies","handleSubmit","e","preventDefault","current","value","then","userCrendential","user","path","push","console","log","message","handleLoginViaGoogle","provider","auth","GoogleAuthProvider","signInWithPopup","result","credential","token","accessToken","catch"],"mappings":"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","sourcesContent":["import React, {useRef,useState} from 'react'\nimport {Form, Button, Card, Alert} from 'react-bootstrap'\nimport {useAuth} from '../Context/Auth'\nimport {Link,useHistory} from 'react-router-dom';\nimport firebase from 'firebase'\nimport 'firebase/auth'\nimport {useCookies} from 'react-cookie'\n\nfunction Login() {\n    const emailRef = useRef();\n    const passwordRef = useRef();\n    const {login} = useAuth();\n    const [error,setError] = useState(\"\");\n    const [loading,setLoading] = useState(false)\n    const history = useHistory();\n    const [cookies, setCookies] = useCookies(['user'])\n\n\n    async function handleSubmit(e){\n        e.preventDefault();\n        try{\n            setError(\"\");\n            setLoading(true); \n            await login(emailRef.current.value, passwordRef.current.value)\n            .then((userCrendential)=>{\n                const user = userCrendential.user\n                setCookies('user', user, {path:'/'});\n            });\n            history.push(\"/dashboard\");\n        }catch(err){\n            console.log(err.message);\n            setLoading(false);\n            setError(err.message);\n        }\n    }\n\n    const handleLoginViaGoogle = () => {\n        var provider = new firebase.auth.GoogleAuthProvider();\n\n        firebase.auth()\n            .signInWithPopup(provider)\n            .then((result) => {\n                /** @type {firebase.auth.OAuthCredential} */\n                const credential = result.credential;\n                // This gives you a Google Access Token. You can use it to access the Google API.\n                const token = credential.accessToken;\n                // The signed-in user info.\n                const user = result.user\n                setCookies('user', user, {path:'/'});\n            })\n            .then((result) => {\n                history.push(\"/dashboard\")\n            })\n            .catch((error) => {\n                console.log(error)\n            });\n        \n\n\n    }\n\n    return (\n        <div className=\"login-wrapper\">\n            <Card>\n                <Card.Body>\n                    <h2 className=\"text-center mb-4\" >Log In</h2>\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\n\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group id=\"email\">\n                        <Form.Label>Email</Form.Label>\n                        <Form.Control type=\"email\" ref={emailRef} required />\n                    </Form.Group>\n                    <Form.Group id=\"password\">\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control type=\"password\" ref={passwordRef} required />\n                    </Form.Group>\n                    <Button disabled={loading} type=\"submit\" className=\"w-100\">Log In</Button>\n                </Form>\n                <div className=\"w-100 text-center mt-2\">\n                    <Link to=\"/forgot-password\" >Forgot Password?</Link>\n                </div>\n                </Card.Body>\n            </Card>\n                <div className=\"w-100 text-center mt-2\">\n                    Need an account? <Link to=\"/signup\" >Sign Up</Link>\n                </div>\n                <div className=\"w-100 text-center mt-2\">\n                    <span>Login via <a onClick={handleLoginViaGoogle} id=\"gmail\">Gmail?</a></span>\n\n                </div>\n\n\n        </div>\n    )\n}\n\nexport default Login\n\n"]},"metadata":{},"sourceType":"module"}